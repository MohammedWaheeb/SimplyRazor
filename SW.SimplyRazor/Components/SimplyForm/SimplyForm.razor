@typeparam TModel
@implements IChangeMaster
@namespace SW.SimplyRazor

<CascadingValue IsFixed="true" Value="this" Name="ChangeMaster">
    <CascadingValue Value="Value" Name="Model">
        @ChildContent
    </CascadingValue>
</CascadingValue>

@code {

    [Parameter]
    public TModel Value { get; set; }

    [Parameter]
    public EventCallback<TModel> ValueChanged { get; set; }

    [Parameter]
    public RenderFragment ChildContent { get; set; }


    async Task FormValueChanged(object value)
    {
        await ValueChanged.InvokeAsync((TModel)value);
    }

    public async Task FieldValueChanged(string name)
    {
        await ValueChanged.InvokeAsync(Value);
    }

}
