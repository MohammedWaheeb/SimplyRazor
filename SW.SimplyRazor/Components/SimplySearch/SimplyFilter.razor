@namespace SW.SimplyRazor
@implements ISearchyFilterSetup
@implements IDisposable

@code {

    [CascadingParameter(Name = "Search")]
    public ISimplySearch Search { get; set; }

    [Parameter]
    public string Type { get; set; }

    [Parameter]
    public string Text { get; set; }

    [Parameter]
    public string Field { get; set; }

    [Parameter]
    public bool Required { get; set; }

    [Parameter]
    public bool Default { get; set; }

    [Parameter]
    public ICollection<SearchyRule> Rules { get; set; }

    async protected override Task OnInitializedAsync()
    {
        
        if (Rules == null) Rules = new List<SearchyRule>();
        if (Rules.Count == 0) Rules = SearchyDataType.RulesFor(Type);

        await Search.AddFilterSetup(this);

    }

    public void Dispose()
    {
        Search.RemoveFilterSetup(this);
    }

}
