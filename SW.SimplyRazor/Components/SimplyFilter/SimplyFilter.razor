@namespace SW.SimplyRazor
@implements ISearchyFilterConfig
@implements IDisposable

@code {

    [CascadingParameter(Name = "FilterConfigs")]
    public IList<ISearchyFilterConfig> FilterConfigs { get; set; }

    [Parameter]
    public string Type { get; set; }

    [Parameter]
    public string Text { get; set; }

    [Parameter]
    public string Field { get; set; }

    [Parameter]
    public bool Required { get; set; }

    [Parameter]
    public bool Default { get; set; }

    [Parameter]
    public ICollection<SearchyRule> Rules { get; set; }

    protected override void OnInitialized()
    {
        if (FilterConfigs != null)
        {
            if (Rules == null) Rules = new List<SearchyRule>();
            if (Rules.Count == 0) Rules = SearchyFilterConfigType.RulesFor(Type);
            FilterConfigs.Add(this);
        }
    }

    public void Dispose()
    {
        FilterConfigs?.Remove(this);
    }

}
